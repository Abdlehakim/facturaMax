/* app-custom.css */

/* ----- Dynamic legends and number labels by doc type ----- */
.section-box legend .for-devis,
.section-box legend .for-bl,
.section-box legend .for-bc { display: none; }
#invNumberLabel .for-devis,
#invNumberLabel .for-bl,
#invNumberLabel .for-bc { display: none; }

.section-box:has(#docType option[value="devis"]:checked) legend .for-facture { display: none; }
.section-box:has(#docType option[value="devis"]:checked) legend .for-devis { display: inline; }
.section-box:has(#docType option[value="devis"]:checked) #invNumberLabel .for-facture { display: none; }
.section-box:has(#docType option[value="devis"]:checked) #invNumberLabel .for-devis { display: inline; }

.section-box:has(#docType option[value="bl"]:checked) legend .for-facture,
.section-box:has(#docType option[value="bl"]:checked) legend .for-devis { display: none; }
.section-box:has(#docType option[value="bl"]:checked) legend .for-bl { display: inline; }
.section-box:has(#docType option[value="bl"]:checked) #invNumberLabel .for-facture,
.section-box:has(#docType option[value="bl"]:checked) #invNumberLabel .for-devis { display: none; }
.section-box:has(#docType option[value="bl"]:checked) #invNumberLabel .for-bl { display: inline; }

.section-box:has(#docType option[value="bc"]:checked) legend .for-facture,
.section-box:has(#docType option[value="bc"]:checked) legend .for-devis,
.section-box:has(#docType option[value="bc"]:checked) legend .for-bl { display: none; }
.section-box:has(#docType option[value="bc"]:checked) legend .for-bc { display: inline; }
.section-box:has(#docType option[value="bc"]:checked) #invNumberLabel .for-facture,
.section-box:has(#docType option[value="bc"]:checked) #invNumberLabel .for-devis,
.section-box:has(#docType option[value="bc"]:checked) #invNumberLabel .for-bl { display: none; }
.section-box:has(#docType option[value="bc"]:checked) #invNumberLabel .for-bc { display: inline; }

/* ----- Form helpers ----- */
.label-inline { display:inline-flex; align-items:center; gap:.5rem; }
.label-text { cursor:default; user-select:text; white-space:nowrap; }
.col-toggle { cursor:pointer; }

/* ----- Hide table columns when body gets flags ----- */
.hide-col-ref      #items thead th:nth-child(1),
.hide-col-ref      #items tbody td:nth-child(1){ display:none; }
.hide-col-product  #items thead th:nth-child(2),
.hide-col-product  #items tbody td:nth-child(2){ display:none; }
.hide-col-desc     #items thead th:nth-child(3),
.hide-col-desc     #items tbody td:nth-child(3){ display:none; }
.hide-col-qty      #items thead th:nth-child(4),
.hide-col-qty      #items tbody td:nth-child(4){ display:none; }
.hide-col-price    #items thead th:nth-child(5),
.hide-col-price    #items tbody td:nth-child(5){ display:none; }
.hide-col-tva      #items thead th:nth-child(6),
.hide-col-tva      #items tbody td:nth-child(6){ display:none; }
.hide-col-discount #items thead th:nth-child(7),
.hide-col-discount #items tbody td:nth-child(7){ display:none; }

/* TTC column is toggled in JS on the 8th column */

/* ----- Extras (shipping & stamp) and WH fields layout ----- */
#extrasBox #shipFields,
#extrasBox #stampFields,
#whBox #whFields { display:none; }

#extrasBox #shipFields,
#extrasBox #stampFields{
  display:grid;
  grid-template-columns: 2fr 1fr 1fr;
  gap:12px;
  align-items:end;
  width:100%;
}

#whBox #whFields{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr 2fr 1fr; /* Taux | Base | Seuil | Libellé | Montant */
  gap:12px;
  align-items:end;
  width:100%;
}
#whFields label.full{ grid-column: auto; }

@media (max-width: 900px){
  #whBox #whFields{ grid-template-columns: 1fr 1fr; }
  #whFields label.full{ grid-column:1 / -1; }
}
@media (max-width: 720px){
  #extrasBox #shipFields,
  #extrasBox #stampFields{ grid-template-columns: 1fr; }
}

/* ======== Smartwebify Modal Dialog ======== */
.swbDialog{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  backdrop-filter:saturate(110%) blur(2px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

.swbDialog__panel{
  width:min(520px, calc(100vw - 40px));
  background:#fff;
  color:#0f172a;
  border-radius:12px;
  box-shadow:0 20px 50px rgba(0,0,0,.25), 0 4px 16px rgba(0,0,0,.12);
  overflow:hidden;
  border:1px solid rgba(15,23,42,.08);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans", "Liberation Sans", sans-serif;
}

.swbDialog__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 14px;
  border-bottom:1px solid rgba(15,23,42,.08);
  background:#f8fafc;
}

.swbDialog__title{
  font-size:14px;
  font-weight:700;
  letter-spacing:.01em;
  color:#0b1220;
}

.swbDialog__close{
  appearance:none;
  border:0;
  background:transparent;
  font-size:18px;
  line-height:1;
  color:#334155;
  padding:2px 6px;
  cursor:pointer;
}
.swbDialog__close:hover{ color:#0b1220; }

.swbDialog__msg{
  padding:14px;
  font-size:13px;              /* smaller body text */
  line-height:1.4;
  color:#1f2937;
  white-space:pre-wrap;
  word-break:break-word;
}

/* Actions bar with left/right groups */
.swbDialog__actions{
  display:flex;
  justify-content:space-between;   /* pushes groups to edges */
  align-items:center;
  gap:12px;
  padding:10px 14px 14px;
  background:#f9fafb;
  border-top:1px solid rgba(15,23,42,.08);
}

.swbDialog__group{
  display:flex;
  align-items:center;
  gap:8px;
}

/* ensure both groups can stretch to edges nicely */
.swbDialog__group--left,
/* Keep the two open buttons on one line */
.swbDialog__group--right{
  display: flex;
  gap: 8px;
  flex-wrap: nowrap;     /* no wrapping */
  white-space: nowrap;   /* keep button labels on one line */
  flex: 0 1 auto;        /* don’t force extra shrinking that could wrap */
  align-items: center;
}

/* Ensure the buttons themselves don't wrap text */
.swbDialog__ok,
#swbDialogExtra{
  white-space: nowrap;
}


.swbDialog__group--left  { justify-content:flex-start; }

/* small gap between the two right-side open buttons */
#swbDialogExtra { margin-left:8px; }

/* buttons */
.swbDialog__ok,
.swbDialog__cancel{
  appearance:none;
  border:1px solid transparent;
  border-radius:8px;
  padding:8px 14px;
  font-weight:600;
  font-size:13px;
  cursor:pointer;
}

.swbDialog__ok{
  background:#15335e;
  color:#fff;
}
.swbDialog__ok:hover{ filter:brightness(1.05); }

.swbDialog__cancel{
  background:#fff;
  color:#0b1220;
  border-color:rgba(15,23,42,.12);
}
.swbDialog__cancel:hover{ background:#f3f4f6; }

/* Optional: smaller button variant sometimes used */
.swbDialog .btn.tiny{
  font-size:12px;
  padding:6px 10px;
  border-radius:7px;
}

/* If extra button is hidden, remove its left margin */
#swbDialogExtra[style*="display: none"]{
  margin-left: 0 !important;
}

/* Mobile: stack groups and keep right buttons aligned right */
@media (max-width: 420px){
  .swbDialog__actions{
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }
  .swbDialog__group{ justify-content: space-between; }
  .swbDialog__group--right{ justify-content: flex-end; gap: 8px; }
}
